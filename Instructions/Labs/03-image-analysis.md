---
lab:
  title: 分析 Azure AI Foundry 入口網站中的影像
---

# 分析 Azure AI Foundry 入口網站中的影像

**Azure AI 視覺**包含許多功能，可用來了解影像內容和內容，以及從影像擷取資訊。 在此練習中，您將在 Microsoft 用來建立智慧型應用程式的平台 Azure AI Foundry 入口網站中使用 Azure AI 視覺，借助內建試用體驗分析影像。 

假設虛構零售業者 *Northwind Traders* 已決定實作「智慧商店」，由 AI 服務監視商店，以識別需要協助的客戶，並指示員工協助他們。 使用 Azure AI 視覺，可以分析整間商店的攝影機拍攝的影像，以提供其拍攝內容有意義的說明。

## 在 Azure AI Foundry 入口網站中建立專案

讓我們從建立 Azure AI Foundry 專案開始。

1. 在網頁瀏覽器中，開啟 [Azure AI Foundry 入口網站](https://ai.azure.com) 於`https://ai.azure.com` 並使用您的 Azure 認證登入。 關閉首次登入時開啟的所有提示或快速啟動窗格，如有必要，使用左上角的 **Azure AI Foundry** 標誌瀏覽到首頁，首頁類似於下圖（若 [說明]**** 窗格已開啟，請將其關閉）：

    ![Azure AI Foundry 首頁的螢幕擷取畫面，其中已選取 [代理程式]。](./media/azure-ai-foundry-home-page.png)

1. 在首頁中，選取 [+ 建立代理程式]****。

1. 在 [建立代理程式]**** 精靈中，輸入專案的有效名稱。 

1. 選取 [進階選項]**** 並指定以下設定：
    - **Azure AI Foundry 資源**： *保留預設名稱*
    - **訂用帳戶**：您的 Azure 訂用帳戶**
    - **資源群組**：建立或選取資源群組**
    - **地區**：選取以下位置之一：
        * 美國東部
        * 法國中部
        * 南韓中部
        * 西歐
        * 美國西部

1. 選取 [建立]**** 並檢閱您的設定。 等候設定程序完成。

    >**注意**：如果您收到權限錯誤，請選取 [修復]**** 按鈕新增適當的權限以繼續。

1. 建立專案後，您將預設進入 Azure AI Foundry 入口網站中的代理程式遊樂場，它看起來類似於下圖：

    ![Azure AI Foundry 入口網站中 Azure AI 專案詳細資料的螢幕螢幕擷取畫面。](./media/ai-foundry-project-2.png)
 
1. 在新瀏覽器視窗中，開啟 [Azure AI 服務探索] 頁面[](https://ai.azure.com/explore/aiservices)。

1. 在 [AI 服務]** 頁面上，選取 [視覺 + 文件]** 圖格，以試用 Azure AI 視覺和文件功能。

## 產生影像的輔助字幕

讓我們使用 Azure AI 視覺的影像輔助字幕功能來分析 *Northwind Traders* 商店中相機拍攝的影像。 影像輔助字幕可透過 [輔助字幕]**** 和 [密集輔助字幕]**** 功能來取得。

1. 在 [視覺 + 文件]** 頁面上，向下捲動並選取 [檢視所有其他視覺功能]** 下的 [影像]****。 然後選取 [影像輔助字幕]**** 圖格。

    ![[視覺與文件] 頁面 [影像] 區段中 [影像輔助字幕] 圖格的螢幕擷取畫面。](./media/vision-image-captioning-tile.png)

1. 在 [將輔助字幕新增至影像]**** 頁面上，檢閱您所連接的資源，其列在 [試用]**** 次標題下。 您不應該進行變更。 (*注意*：如果您在稍早的資源建立期間未自訂有效的資源位置，系統可能會要求您建立位於有效區域中的新 Azure AI 服務資源。 您必須建立新的資源，才能繼續進行實驗。)  

1. 選取 [**https://aka.ms/mslearn-images-for-analysis**](https://aka.ms/mslearn-images-for-analysis) 以下載 **image-analysis.zip**。 開啟電腦上的資料夾，並找出名為 **store-camera-1.jpg** 的檔案；其中包含下列影像：

    ![影像：父母在店裡使用手機相機拍攝小孩的照片](./media/analyze-images-vision/store-camera-1.jpg)

1. 將 **store-camera-1.jpg** 影像拖曳至 [將檔案拖放於此處]**** 方塊，或瀏覽至檔案系統上的檔案，以上傳該影像。

1. 觀察產生的輔助字幕文字，該文字會顯示在影像右側的 [偵測到的屬性]**** 面板中。

    [輔助字幕]**** 功能提供描述影像內容的單一人類可讀英文句子。

1. 接下來，使用相同的影像來執行 [密集輔助字幕]****。 選取頁面頂端的 [返回]** 箭號，返回 [視覺 + 文件]**** 頁面。 在 [視覺 + 文件]** 頁面上，選取 [影像]**** 索引標籤，然後選取 [密集輔助字幕]**** 圖格。

    [密集輔助字幕]**** 功能與 [輔助字幕]**** 功能不同，因為它為影像提供多個人類可讀的輔助字幕，其中一種描述影像的內容，另一種涵蓋了圖片中偵測到的重要物件。 每個偵測到的物件都包含週框方塊，此方塊會定義與物件相關聯影像內的像素座標。

1. 將滑鼠停留在 [偵測到的屬性]**** 清單中的其中一個輔助字幕上，並觀察影像內會發生什麼事。

    ![影像及其輔助字幕隨即顯示。](./media/analyze-images-vision/dense-captioning.png)

    將滑鼠游標移至清單中的其他輔助字幕上方，並注意週框方塊在影像中如何移動，以醒目提示用來產生輔助字幕的影像部分。

## 標記影像 

您將嘗試的下一個功能是 [擷取標籤]** 功能。 擷取標籤是以數千個可辨識的物件為基礎，包括生物、風景和動作。

1. 返回 Azure AI Foundry 的 [視覺 + 文件]** 頁面，然後選取 [影像]**** 索引標籤，然後選取 [常見標籤擷取]**** 圖格。

1. 開啟包含您所下載影像的資料夾，並找出名為 **store-image-2.jpg** 的檔案，如下所示：

    ![影像：在超市中拿著購物籃的人](./media/analyze-images-vision/store-camera-2.jpg)

1. 上傳 **store-camera-2.jpg** 檔案。

1. 檢閱從影像擷取的標籤清單，以及偵測到的屬性面板中每個標籤的信賴度分數。 在這裡，信賴度分數是偵測到的屬性文字描述影像中實際內容的可能性。 請注意，標籤清單中不僅包含物件，也包括*購物*、*銷售*及*站立*等動作。

    ![Vision Studio 中偵測屬性面板的螢幕擷取畫面，其中顯示於原始影像旁的文字和信賴度分數。](./media/analyze-images-vision/detect-attributes.png)

## 物件偵測

在這項工作中，您會使用影像分析的 [物件偵測]**** 功能。 物件偵測會根據數千個可辨識的物件和生物來偵測和擷取週框方塊。

1. 返回 Azure AI Foundry 的 [視覺 + 文件]** 頁面，然後選取 [影像]**** 索引標籤，然後選取 [常見物件偵測]**** 圖格。

1. 開啟包含您所下載影像的資料夾，並找出名為 **store-camera-3.jpg** 的檔案，如下所示：

    ![影像：推著購物車的人](./media/analyze-images-vision/store-camera-3.jpg)

1. 上傳 **store-camera-3.jpg** 檔案。

1. 在 [偵測到的屬性]**** 方塊中，觀察偵測到的物件清單及其信賴度分數。

1. 將滑鼠游標停留在 [偵測到的屬性]**** 清單中的物件上方，以醒目提示影像中物件的週框方塊。

1. 移動 [閾值]**** 滑桿，直到滑桿右側顯示 70 的值為止。 觀察清單中物件會發生什麼事。 閾值滑桿會指定只應顯示識別為信賴度分數或機率大於閾值的物件。

## 清理

如果您不打算進行更多的練習，請刪除不再需要的任何資源。 這可以避免產生任何不必要的成本。

1.  開啟 [Azure 入口網站]( https://portal.azure.com)，然後選取包含您所建立資源的資源群組。 
1.  選取資源並選取 [刪除]****，然後再選取 [是]**** 加以確認。 接著即會刪除該資源。

## 深入了解

若要深入了解此服務的功能，請參閱 [Azure AI 視覺頁面](https://learn.microsoft.com/azure/ai-services/computer-vision/overview)。
